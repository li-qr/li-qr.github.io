---
title: 高性能MySQL摘要
categories:
- MySQL
description: 高性能MySQL摘要
permalink: "/posts/mysql-distinct-sort-query"
excerpt: 内容全部源自《高性能MySQL第三版》，取自里面的重点内容摘要。包括MySQL架构、性能、索引、查询优化、高级特性等。
---
<<<<<<< HEAD
# Schema与数据类型优化

## 选择优化的数据类型

选择可以满足需求的占用空间最小的数据类型，因为他们占用更少的磁、内存和cpu缓存，并且处理时需要的CPU周期也更少。

尽量使用内建类型和简单类型比如时间不使用VARCHAR，IP尽量使用整型。
当可为NULL的列被索引时，每个索引记录需要一个额外的字节，
避免NULL，如果查询中包含可为NULL的列，因为可为NULL的列使得 索引、索引统计和值比较都更复杂。可为NULL的列会使用更多的存储空间。在MyISAM里甚至还可能导致固定大小的例如只有一个整数列的索引）变成可变大小的索引。
当然也有例外，例如值得一提的是，InnoDB使用单独的位（bit）存储NULL值，所以对于稀疏数据有很好的空间效率。但这一点不适用于MyISAM。

在为列选择数据类型时，第一步需要确定合适的大类型：数字、字符串、时间等。第二步是选择具体类型。

MySQL支持很多数据类型的别名，但是实际使用的类型都是一样。

## 整数类型

TINYINT，SMALLINT，MEDIUMINT，INT，BIGINT。分别使用8，16，24，32，64 位存储空间。
分有符号和无符号。MySQL可以为整数类型指定宽度，它不会 限制值的合法范围，只是规定了MySQL的一些交互工具用来显示字符的个数。

## 实数类型

实数是带有小数部分的数字。然而，它们不只是为了存储小数部分；也可以使用DECIMAL 存储比BIGINT还大的整数。

对于DECIMAL列，可以指定小数点前后所允许的最大位数。这会影响列的空间消耗。MySQL 5.0和更高版本将数字打包保存到一个二进制字符 串中（每4个字节存9个数字）。例如，DECIMAL（18,9）小数点两边将各存储9个数字，一共使用9 个字节：小数点前的数字用4个字节，小数点后的数字用4个字节，小数点本身占1个字节。

## 字符串类型
=======
<div class="mermaid">
graph LR;
  A-->B
  B-->C
  C-->D
  D-->A
</div>
123
>>>>>>> 54d9535d006693a8e1e1e9e0b02823fac138f1f6
